# 为什么要使用多线程？多个进程也可以啊

一方面，
unix系统原本的设计是没有线程的概念的，unix系统从设计上更倾向于使用进程。
windows由于创建进程的开销巨大，因此更热衷线程。

另一方面，
线程并不是设计上的冗余。
进程之间的地址空间是相互独立的，但是线程会共享内存地址空间。同一个进程的多个线程共享一份全局内存区域，包括初始化数据段、未初始化数据段和动态分配的堆内存段。

共享内存地址空间给线程带来了很多的优势：
- 创建线程耗费的时间比创建进程耗费的时间更短。
- 终止线程耗费的时间比终止进程耗费的时间更短。
- 线程之间上下文切换的开销比进程之间的上下文切换更小。
- 线程之间共享数据比进程之间共享数据更简单。


下面进行进程和线程之间的速度测试：
- 创建进程的测试程序：
  1. 调用fork函数创建子进程，子进程无实际操作，调用exit函数立刻退出，父进程等待子进程退出。
  2. 重复执行步骤1，共执行10万次。
- 创建线程的测试程序：
  1. 调用pthread_create创建线程，线程无实际操作；调用pthread_exit函数，立刻退出；主线程调用pthread_join函数等待线程退出。
  2. 重复执行步骤1，共执行10万次。



